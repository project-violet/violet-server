# Violet Statistics

## Query for View Time

```sql
# ViewSeconds Counts
select ViewSeconds, count(*), repeat('#', count(*)/100)  from viewtime
group by ViewSeconds order by ViewSeconds limit 1000;
+-------------+----------+------------------------------------------+
| ViewSeconds | count(*) | repeat('#', count(*)/100)                |
+-------------+----------+------------------------------------------+
|           0 |       11 |                                          |
|           1 |      322 | ###                                      |
|           2 |     1168 | ############                             |
|           3 |     1471 | ###############                          |
|           4 |     1709 | #################                        |
|           5 |     2401 | ########################                 |
|           6 |     3236 | ################################         |
|           7 |     3728 | #####################################    |
|           8 |     3983 | ######################################## |
|           9 |     3916 | #######################################  |
|          10 |     3793 | ######################################   |
|          11 |     3778 | ######################################   |
|          12 |     3522 | ###################################      |
|          13 |     3378 | ##################################       |
|          14 |     3220 | ################################         |
|          15 |     2952 | ##############################           |
|          16 |     2823 | ############################             |
|          17 |     2668 | ###########################              |
|          18 |     2523 | #########################                |
|          19 |     2419 | ########################                 |
|          20 |     2304 | #######################                  |
|          21 |     2154 | ######################                   |
|          22 |     2169 | ######################                   |
|          23 |     2067 | #####################                    |
|          24 |     1941 | ###################                      |
|          25 |     1936 | ###################                      |
|          26 |     1784 | ##################                       |
|          27 |     1716 | #################                        |
|          28 |     1784 | ##################                       |
|          29 |     1655 | #################                        |
|          30 |     1623 | ################                         |
|          31 |     1478 | ###############                          |
|          32 |     1543 | ###############                          |
|          33 |     1455 | ###############                          |
|          34 |     1450 | ###############                          |
|          35 |     1396 | ##############                           |
|          36 |     1346 | #############                            |
|          37 |     1397 | ##############                           |
|          38 |     1371 | ##############                           |
|          39 |     1312 | #############                            |
|          40 |     1272 | #############                            |
|          41 |     1225 | ############                             |
|          42 |     1235 | ############                             |
|          43 |     1293 | #############                            |
|          44 |     1183 | ############                             |
|          45 |     1225 | ############                             |
|          46 |     1200 | ############                             |
|          47 |     1121 | ###########                              |
|          48 |     1166 | ############                             |
|          49 |     1141 | ###########                              |
|          50 |     1051 | ###########                              |
|          51 |     1133 | ###########                              |
|          52 |     1065 | ###########                              |
|          53 |     1032 | ##########                               |
|          54 |     1149 | ###########                              |
|          55 |     1053 | ###########                              |
|          56 |     1033 | ##########                               |
|          57 |     1025 | ##########                               |
|          58 |     1058 | ###########                              |
|          59 |      971 | ##########                               |
|          60 |      912 | #########                                |
|          61 |      980 | ##########                               |
|          62 |      962 | ##########                               |
|          63 |      936 | #########                                |
|          64 |      964 | ##########                               |
|          65 |      910 | #########                                |
|          66 |      940 | #########                                |
|          67 |      907 | #########                                |
|          68 |      866 | #########                                |
|          69 |      927 | #########                                |
|          70 |      876 | #########                                |
|          71 |      925 | #########                                |
|          72 |      868 | #########                                |
|          73 |      837 | ########                                 |
|          74 |      865 | #########                                |
|          75 |      822 | ########                                 |
|          76 |      832 | ########                                 |
|          77 |      822 | ########                                 |
|          78 |      871 | #########                                |
|          79 |      834 | ########                                 |
|          80 |      789 | ########                                 |
|          81 |      759 | ########                                 |
|          82 |      799 | ########                                 |
|          83 |      748 | #######                                  |
|          84 |      778 | ########                                 |
|          85 |      736 | #######                                  |
|          86 |      759 | ########                                 |
|          87 |      707 | #######                                  |
|          88 |      722 | #######                                  |
|          89 |      779 | ########                                 |
|          90 |      725 | #######                                  |
|          91 |      706 | #######                                  |
|          92 |      687 | #######                                  |
|          93 |      701 | #######                                  |
|          94 |      669 | #######                                  |
|          95 |      667 | #######                                  |
|          96 |      650 | #######                                  |
|          97 |      641 | ######                                   |
|          98 |      694 | #######                                  |
|          99 |      665 | #######                                  |
|         100 |      631 | ######                                   |
|         101 |      618 | ######                                   |
|         102 |      664 | #######                                  |
|         103 |      609 | ######                                   |
|         104 |      648 | ######                                   |
...

# Seconds per Pages Counts
select truncate(ceil(a.ViewSeconds/b.Pages*10.0)/10.0,1) as c, count(*), repeat('#', count(*)/500)  from viewtime 
as a left join article_pages as b on a.ArticleId=b.Id group by c order by c limit 100;
+------+----------+--------------------------------------------------------+
| c    | count(*) | repeat('#', count(*)/500)                              |
+------+----------+--------------------------------------------------------+
| NULL |    10183 | ####################                                   |
|  0.0 |       10 |                                                        |
|  0.2 |    26944 | ###################################################### |
|  0.4 |    15168 | ##############################                         |
|  0.6 |    12148 | ########################                               |
|  0.8 |     9666 | ###################                                    |
|  1.0 |     9057 | ##################                                     |
|  1.2 |     6922 | ##############                                         |
|  1.4 |     6924 | ##############                                         |
|  1.6 |     6510 | #############                                          |
|  1.8 |     6121 | ############                                           |
|  2.0 |     6324 | #############                                          |
|  2.2 |     4855 | ##########                                             |
|  2.4 |     5216 | ##########                                             |
|  2.6 |     4813 | ##########                                             |
|  2.8 |     4719 | #########                                              |
|  3.0 |     5008 | ##########                                             |
|  3.2 |     3856 | ########                                               |
|  3.4 |     3993 | ########                                               |
|  3.6 |     3665 | #######                                                |
|  3.8 |     3585 | #######                                                |
|  4.0 |     3769 | ########                                               |
|  4.2 |     2876 | ######                                                 |
|  4.4 |     2986 | ######                                                 |
|  4.6 |     2719 | #####                                                  |
|  4.8 |     2641 | #####                                                  |
...

# Average, Variance whatching seconds per pages
select avg(a.ViewSeconds/b.Pages), variance(a.ViewSeconds/b.Pages) from viewtime 
as a left join article_pages as b on a.ArticleId=b.Id where b.Pages<>0 and a.ViewSeconds>=30 and a.ViewSeconds<=302;
+----------------------------+---------------------------------+
| avg(a.ViewSeconds/b.Pages) | variance(a.ViewSeconds/b.Pages) |
+----------------------------+---------------------------------+
|                 6.21027920 |                  26519.15946969 |
+----------------------------+---------------------------------+
std: 162.847043171
  p: x<=302.50143 = 0.9808

# Max seconds per pages item
select *, a.ViewSeconds/b.Pages FROM 
viewtime as a left join article_pages as b on a.ArticleId=b.Id
WHERE (ceil(a.ViewSeconds/b.Pages)) IN
(select ceil(max(a.ViewSeconds/b.Pages)) from viewtime as a left join article_pages as b on a.ArticleId=b.id);
+--------+-----------+---------------------+-------------+------------------------------------------+---------+-------+-----------------------+
| Id     | ArticleId | TimeStamp           | ViewSeconds | UserAppId                                | Id      | Pages | a.ViewSeconds/b.Pages |
+--------+-----------+---------------------+-------------+------------------------------------------+---------+-------+-----------------------+
| 142408 |   1746781 | 2021-03-18 22:51:33 |      163895 | dc6122d9b5cb83d27df3617a031d3c84250b5d80 | 1746781 |     3 |            54631.6667 |
+--------+-----------+---------------------+-------------+------------------------------------------+---------+-------+-----------------------+

# List seconds per pages item
select *, a.ViewSeconds/b.Pages FROM 
viewtime as a left join article_pages as b on a.ArticleId=b.Id
order by a.ViewSeconds/b.Pages desc limit 100;
+--------+-----------+---------------------+-------------+------------------------------------------+---------+-------+-----------------------+
| Id     | ArticleId | TimeStamp           | ViewSeconds | UserAppId                                | Id      | Pages | a.ViewSeconds/b.Pages |
+--------+-----------+---------------------+-------------+------------------------------------------+---------+-------+-----------------------+
| 142408 |   1746781 | 2021-03-18 22:51:33 |      163895 | dc6122d9b5cb83d27df3617a031d3c84250b5d80 | 1746781 |     3 |            54631.6667 |
|  64578 |   1859413 | 2021-03-09 07:50:54 |      424640 | 5805d2e4d026abeab2c6580c535e7d65eb951529 | 1859413 |    16 |            26540.0000 |
|  67256 |   1393865 | 2021-03-09 15:31:23 |       82199 | 05ef7056ec83b28ff40f7984012833860a92a2ce | 1393865 |     5 |            16439.8000 |
| 143744 |   1867473 | 2021-03-19 04:09:37 |      357069 | 6286e022b4c961025fc5078d4d894707c6075ab4 | 1867473 |    32 |            11158.4063 |
| 199039 |   1174105 | 2021-03-25 23:25:03 |      279418 | 57d6f650bf3d20961c5b2299c84b49949264ea51 | 1174105 |    30 |             9313.9333 |
|  72915 |   1705086 | 2021-03-10 09:36:54 |       95277 | 9df0e436be76ef5c0655075550e2e149d41b6170 | 1705086 |    12 |             7939.7500 |
| 186582 |   1872677 | 2021-03-24 09:06:28 |      144145 | dabb7fb9133717883891bd50962d035548c34234 | 1872677 |    20 |             7207.2500 |
...
```